<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Calibración y referenciación del DTHIS-C – Desarrollo e implementación con tecnologías libres de un dispositivo portátil para evaluar el confort térmico, lumínico y acústico en interiores</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./capitulo_5.html" rel="next">
<link href="./capitulo_3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8da5b4427184b79ecddefad3d342027e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Buscar"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./capitulo_4.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Calibración y referenciación del DTHIS-C</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resumen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./capitulo_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción al confort en espacios interiores</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./capitulo_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Confort térmico, acústico, lumínico, calidad del aire e implementación del DTHIS-C</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./capitulo_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Diseño y construcción del DTHIS-C</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./capitulo_4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Calibración y referenciación del DTHIS-C</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./capitulo_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusiones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./referencias.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliografía</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contenido</h2>
   
  <ul>
  <li><a href="#sec-metodologia" id="toc-sec-metodologia" class="nav-link active" data-scroll-target="#sec-metodologia"><span class="header-section-number">4.1</span> Metodología experimental</a></li>
  <li><a href="#sec-obtencion" id="toc-sec-obtencion" class="nav-link" data-scroll-target="#sec-obtencion"><span class="header-section-number">4.2</span> Obtención de los datos</a>
  <ul>
  <li><a href="#thingsboard" id="toc-thingsboard" class="nav-link" data-scroll-target="#thingsboard">ThingsBoard</a></li>
  </ul></li>
  <li><a href="#sec-taire-b" id="toc-sec-taire-b" class="nav-link" data-scroll-target="#sec-taire-b"><span class="header-section-number">4.3</span> Temperatura del aire</a>
  <ul>
  <li><a href="#termopar" id="toc-termopar" class="nav-link" data-scroll-target="#termopar">Termopar</a></li>
  <li><a href="#scd30" id="toc-scd30" class="nav-link" data-scroll-target="#scd30">SCD30</a></li>
  </ul></li>
  <li><a href="#sec-trad-b" id="toc-sec-trad-b" class="nav-link" data-scroll-target="#sec-trad-b"><span class="header-section-number">4.4</span> Temperatura radiante</a>
  <ul>
  <li><a href="#tpf1" id="toc-tpf1" class="nav-link" data-scroll-target="#tpf1">TPF1</a></li>
  </ul></li>
  <li><a href="#sec-viento-b" id="toc-sec-viento-b" class="nav-link" data-scroll-target="#sec-viento-b"><span class="header-section-number">4.5</span> Velocidad del viento</a>
  <ul>
  <li><a href="#wind-sensor" id="toc-wind-sensor" class="nav-link" data-scroll-target="#wind-sensor">Wind Sensor</a></li>
  </ul></li>
  <li><a href="#sec-hrco-b" id="toc-sec-hrco-b" class="nav-link" data-scroll-target="#sec-hrco-b"><span class="header-section-number">4.6</span> Humedad relativa y CO<sub>2</sub></a>
  <ul>
  <li><a href="#scd30-1" id="toc-scd30-1" class="nav-link" data-scroll-target="#scd30-1">SCD30</a></li>
  </ul></li>
  <li><a href="#sec-sonido-b" id="toc-sec-sonido-b" class="nav-link" data-scroll-target="#sec-sonido-b"><span class="header-section-number">4.7</span> Sonido</a>
  <ul>
  <li><a href="#micrófono" id="toc-micrófono" class="nav-link" data-scroll-target="#micrófono">Micrófono</a></li>
  </ul></li>
  <li><a href="#sec-ilum-b" id="toc-sec-ilum-b" class="nav-link" data-scroll-target="#sec-ilum-b"><span class="header-section-number">4.8</span> Iluminancia</a>
  <ul>
  <li><a href="#fisheye" id="toc-fisheye" class="nav-link" data-scroll-target="#fisheye">Fisheye</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="cap-calibracion" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Calibración y referenciación del DTHIS-C</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>En este capítulo se detalla el proceso de calibración y referenciación del DTHIS-C. Se presenta la herramienta para la recuperación y visualización de los datos recopilados junto con sus debidos procedimientos. Asimismo, se describen las metodologías experimentales utilizadas para determinar el error de cada sensor, se exponen las pruebas realizadas en distintos escenarios y se presenta el proceso de caracterización de los sensores, que componen al dispositivo:</p>
<ul>
<li><p>Termopar tipo T: Temperatura del aire.</p></li>
<li><p>TPF1/E-20 PT1000: Temperatura radiante.</p></li>
<li><p>Wind Sensor Rev P6: Velocidad del viento.</p></li>
<li><p>SCD30 Sensirion: Temperatura del aire, la humedad relativa y la concentración de CO<sub>2</sub>.</p></li>
<li><p>Micrófono ambiental USB: Niveles de sonido.</p></li>
</ul>
<section id="sec-metodologia" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="sec-metodologia"><span class="header-section-number">4.1</span> Metodología experimental</h2>
<p>La calibración consiste en verificar la exactitud de un sensor, comparándolo con un estándar de referencia, de modo que sus mediciones reflejen correctamente el valor real bajo condiciones controladas. En contraste, la referenciación implica comparar directamente las lecturas del sensor con las de un instrumento de referencia en condiciones reales, evaluando su desempeño en situaciones prácticas.</p>
<p>Cada sensor empleado en este estudio mide variables físicas distintas utilizando métodos de medición específicos. Por ello, se diseñaron campañas de calibración y referenciación adaptadas a las características únicas de cada instrumento, procesos fundamentales para asegurar tanto la exactitud como la confiabilidad de los datos recopilados, para detectar y corregir posibles desviaciones.</p>
<p>En la <a href="#tbl-instrumentos" class="quarto-xref">Tabla&nbsp;<span>4.1</span></a> se presenta la lista de los sensores y sus respectivos instrumentos de referencia utilizados en los procesos de calibración y referenciación.</p>
<div id="tbl-instrumentos" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-instrumentos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.1: Instrumentos de calibración y referenciación para los sensores que consituyen al DTHIS-C.
</figcaption>
<div aria-describedby="tbl-instrumentos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 31%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Sensor</strong></th>
<th><strong>Instrumento/Procedimiento</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Temperatura ambiente</td>
<td>Termopar tipo T</td>
<td>AMETEK Jofra PTC-155/Calibración</td>
</tr>
<tr class="even">
<td>Temperatura radiante</td>
<td>TPF1/E-20 PT1000</td>
<td>Quest Technologies QUESTemp 36/Calibración</td>
</tr>
<tr class="odd">
<td>Velocidad del viento</td>
<td>Wind Sensor Rev P6</td>
<td>Gill Instruments WindMaster/Calibración</td>
</tr>
<tr class="even">
<td>CO<sub>2</sub> y humedad relativa</td>
<td>SCD30 Sensirion</td>
<td>Fluke 975 AirMeter/Referenciación</td>
</tr>
<tr class="odd">
<td>Sonido</td>
<td>Micrófono ambiental USB</td>
<td>TES-1356 Sound Level Calibrator/Calibración</td>
</tr>
<tr class="even">
<td>Luminancia</td>
<td>5MP OV5647 Wide Angle Fisheye Camera</td>
<td>No aplica/No aplica</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Para evaluar la exactitud, se emplearon dos métricas:</p>
<ul>
<li><p>Error Medio (EM): Mide la desviación promedio de las mediciones del sensor respecto al instrumento de referencia. Un valor positivo indica que el sensor tiende a sobreestimar, mientras que un valor negativo revela una subestimación. Se evalúa con:</p>
<p><span id="eq-em"><span class="math display">\[
  EM = \frac{1}{n} \sum_{i=1}^{n} (X_{s,i} - X_{r,i}).
   \tag{4.1}\]</span></span></p>
<p>donde <span class="math inline">\(X_{s,i}\)</span> y <span class="math inline">\(X_{r,i}\)</span> son las lecturas del sensor y de la referencia para cada muestra, el índice <span class="math inline">\(i\)</span> indica la posición de cada par de lecturas en la serie de datos, y <span class="math inline">\(n\)</span> es el total de muestras.</p></li>
<li><p>Error Absoluto Medio (EAM): Calcula el promedio de las diferencias absolutas entre las mediciones del sensor y las de la referencia, sin considerar el signo. Esta métrica proporciona una medida de la magnitud del error, independientemente de su dirección, y se define como:</p>
<p><span id="eq-eam"><span class="math display">\[
  EAM = \frac{1}{n} \sum_{i=1}^{n} |X_{s,i} - X_{r,i}|.
   \tag{4.2}\]</span></span></p></li>
</ul>
</section>
<section id="sec-obtencion" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="sec-obtencion"><span class="header-section-number">4.2</span> Obtención de los datos</h2>
<section id="thingsboard" class="level4">
<h4 class="anchored" data-anchor-id="thingsboard">ThingsBoard</h4>
<p>ThingsBoard es una plataforma IoT de código abierto diseñada para la recopilación, procesamiento, visualización y gestión de dispositivos, <span class="citation" data-cites="thingsboard">ThingsBoard (<a href="referencias.html#ref-thingsboard" role="doc-biblioref">2023</a>)</span>. En el contexto de esta tesis, se utiliza para transmitir en tiempo real las mediciones obtenidas de los distintos sensores del DTHIS-C hacia un servidor central, donde se alojan y resguardan los datos en una base de datos dedicada a Internet de las Cosas.</p>
<p>Según la documentación oficial de ThingsBoard, la plataforma admite la conectividad mediante protocolos estándares como MQTT, CoAP y HTTP, lo que facilita la integración de diversos dispositivos y sensores, <span class="citation" data-cites="thingsboard">ThingsBoard (<a href="referencias.html#ref-thingsboard" role="doc-biblioref">2023</a>)</span>. En este caso, las mediciones de los sensores se envían desde el DTHIS-C a ThingsBoard, que actúa como una base de datos. La plataforma no solo almacena la información, sino que también permite la creación de tableros interactivos y personalizables que posibilitan la visualización en tiempo real de las mediciones. Esto es fundamental durante las campañas de medición, ya que permite monitorear de forma inmediata el funcionamiento de los sensores, identificar tendencias y detectar posibles anomalías en los datos.</p>
<p>Para facilitar la obtención de datos directamente desde la plataforma ThingsBoard, el Grupo de Energía en Edificaciones del IER-UNAM desarrolló el paquete instalable de Python <code>iertools</code>. Una vez configurado un entorno Python y Git instalado, puede integrarse a al sistema ejecutando en la terminal el siguiente comando:</p>
<div id="d2cb125e" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pip install git<span class="op">+</span>https:<span class="op">//</span>github.com<span class="op">/</span>AltamarMx<span class="op">/</span>iertools.git</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Es importante señalar que, antes de proceder a la obtención y descarga de datos desde ThingsBoard, es necesario crear un archivo de configuración con extensión <code>.ini</code>. Un archivo .ini es un documento de texto plano que almacena parámetros y opciones en formato clave-valor, y se utiliza para definir la configuración necesaria (como la URL del servidor y el token de acceso) que el paquete <code>iertools</code> requiere para conectarse a ThingsBoard.</p>
<p>A continuación, se presenta un ejemplo de cómo estructurar dicho archivo:</p>
<div id="389caa42" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>[dthisc]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>token     <span class="op">=</span> token</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>device_id <span class="op">=</span> device_id</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>tenant    <span class="op">=</span> lata_testing<span class="op">@</span>ier.unam.mx</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>password  <span class="op">=</span> password</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>host      <span class="op">=</span> tb.ier.unam.mx</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>port      <span class="op">=</span> <span class="dv">8080</span> </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una vez instalado <code>iertools</code>, es posible recuperar datos desde un script o notebook. El siguiente fragmento de código ilustra cómo obtener los datos de medición de los termopares del DTHIS-C a partir de ThingsBoard; este ejemplo puede ser ajustado según las necesidades específicas, permitiendo extraer distintos conjuntos de datos conforme a los requerimientos del estudio:</p>
<div id="ca0dd7b9" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> iertools.tb <span class="im">import</span> <span class="op">*</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dateutil.parser <span class="im">import</span> parse</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>fecha1 <span class="op">=</span> parse(<span class="st">"2024-11-22"</span>) </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>fecha2 <span class="op">=</span> fecha1 <span class="op">+</span> pd.Timedelta(<span class="st">"1D"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>tmp <span class="op">=</span> TB(config_file<span class="op">=</span><span class="st">'data/config.ini'</span>, device_name<span class="op">=</span><span class="st">'dthisc'</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>sensores <span class="op">=</span> [<span class="st">"TEMP1"</span>, <span class="st">"TEMP2"</span>, <span class="st">"TEMP3"</span>, <span class="st">"TEMP4"</span>]</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.concat([tmp.get_df(key<span class="op">=</span>sensor,start_datetime<span class="op">=</span>fecha1,end_datetime<span class="op">=</span>fecha2) <span class="cf">for</span> sensor <span class="kw">in</span> sensores],axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>hora_inicio <span class="op">=</span> <span class="st">"2024-11-22 15:42"</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>hora_fin <span class="op">=</span> <span class="st">"2024-11-22 17:09"</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[(data.index <span class="op">&gt;=</span> hora_inicio) <span class="op">&amp;</span> (data.index <span class="op">&lt;=</span> hora_fin)]</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>data.sort_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>data.head(<span class="dv">5</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">TEMP1</th>
<th data-quarto-table-cell-role="th">TEMP2</th>
<th data-quarto-table-cell-role="th">TEMP3</th>
<th data-quarto-table-cell-role="th">TEMP4</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">ts</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-11-22 15:42:00.774</td>
<td>12.42</td>
<td>12.63</td>
<td>13.81</td>
<td>13.48</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-11-22 15:42:03.505</td>
<td>12.37</td>
<td>12.57</td>
<td>13.81</td>
<td>13.46</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-11-22 15:42:06.235</td>
<td>12.44</td>
<td>12.61</td>
<td>13.75</td>
<td>13.48</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-11-22 15:42:08.965</td>
<td>12.46</td>
<td>12.59</td>
<td>13.79</td>
<td>13.45</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-11-22 15:42:11.697</td>
<td>12.38</td>
<td>12.51</td>
<td>13.75</td>
<td>13.44</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Finalmente, para almacenar los datos recuperados, se puede utilizar el siguiente comando para exportarlos a un archivo CSV:</p>
<div id="e018325f" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data.to_csv(<span class="st">"ruta/de/su/preferencia.csv"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sec-taire-b" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="sec-taire-b"><span class="header-section-number">4.3</span> Temperatura del aire</h2>
<section id="termopar" class="level4">
<h4 class="anchored" data-anchor-id="termopar">Termopar</h4>
<p>En esta campaña de calibración se utilizó el AMETEK Jofra PTC-155 (<a href="#fig-AMETEK" class="quarto-xref">Figura&nbsp;<span>4.1</span></a>), un calibrador de temperatura que permite evaluar sensores en un rango de -25°C a 155°C.</p>
<div id="fig-AMETEK" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-AMETEK-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href=".\images/ametek.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figura&nbsp;4.1: AMETEK Jofra PTC-155."><img src=".\images/ametek.jpg" class="img-fluid figure-img" style="width:25.0%"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-AMETEK-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.1: AMETEK Jofra PTC-155.
</figcaption>
</figure>
</div>
<p>El instrumento mencionado se utilizó junto a cuatro termopares tipo T, estableciendo cinco puntos de referencia de temperatura en el intervalo de 10°C a 50°C.</p>
<p>Para cada punto de calibración, se esperó aproximadamente 5 minutos para que el calibrador alcanzara y estabilizara la temperatura deseada. Una vez estabilizada, se registraron los datos durante 10 minutos antes de proceder al siguiente punto. Los resultados obtenidos en esta campaña se pueden observar en la <a href="#fig-termopares" class="quarto-xref">Figura&nbsp;<span>4.2</span></a>.</p>
<div id="cell-fig-termopares" class="cell" data-execution_count="6">
<div id="fig-termopares" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-termopares-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_3.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-termopares-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.2: Temperaturas registradas por los termopares durante el proceso de calibración.
</figcaption>
</figure>
</div>
</div>
<p>Para la calibración de los termopares, se utilizó Python junto con la librería <code>scikit-learn</code>, una herramienta utilizada para el análisis y modelado de datos. En particular, se aplicó un ajuste por regresión lineal a los datos obtenidos durante la campaña, utilizando los siguientes rangos de tiempo y sus respectivas temperaturas de referencia (<span class="math inline">\(T_{ref}\)</span>) (<a href="#tbl-temperaturas" class="quarto-xref">Tabla&nbsp;<span>4.2</span></a>).</p>
<div id="tbl-temperaturas" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-temperaturas-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.2: Temperaturas de referencia y rangos de tiempo.
</figcaption>
<div aria-describedby="tbl-temperaturas-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<thead>
<tr class="header">
<th>T<sub>ref</sub> (°C)</th>
<th>Inicio</th>
<th>Final</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>10</td>
<td>15:44:01</td>
<td>15:52:31</td>
</tr>
<tr class="even">
<td>20</td>
<td>16:02:06</td>
<td>16:11:52</td>
</tr>
<tr class="odd">
<td>30</td>
<td>16:20:44</td>
<td>16:28:58</td>
</tr>
<tr class="even">
<td>40</td>
<td>16:39:23</td>
<td>16:49:57</td>
</tr>
<tr class="odd">
<td>50</td>
<td>16:58:24</td>
<td>17:08:25</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>El ajuste por regresión lineal es una técnica estadística utilizada para modelar la relación entre una variable dependiente y una o más variables independientes. En este caso, la variable dependiente es la temperatura de referencia (<span class="math inline">\(T_{ref}\)</span>), mientras que las variables independientes corresponden a las lecturas obtenidas por cada termopar. El modelo lineal se expresa de la forma:</p>
<p><span id="eq-lineal"><span class="math display">\[
T_{ref} = m \cdot T_{sensor} + b
\tag{4.3}\]</span></span></p>
<p>donde <span class="math inline">\(m\)</span> es la pendiente y <span class="math inline">\(b\)</span> es la ordenada al origen. La regresión lineal permite minimizar el error entre las mediciones del sensor y los valores de referencia, obteniendo las siguientes ecuaciones de calibración:</p>
<p><span id="eq-cal-termopares"><span class="math display">\[
\begin{align}
T_{ref} &amp;= 1.0450 \cdot Termopar 1 - 2.4327 \\
T_{ref} &amp;= 1.0602 \cdot Termopar 2 - 2.8632 \\
T_{ref} &amp;= 1.0814 \cdot Termopar 3 - 4.4316 \\
T_{ref} &amp;= 1.0554 \cdot Termopar 4 - 3.9348
\end{align}
\tag{4.4}\]</span></span></p>
<p>Al aplicar estas ecuaciones a los datos obtenidos en la campaña, se obtienen los valores calibrados de temperatura para cada termopar. Los ajustes lineales pueden observarse en la <a href="#fig-ctermopares" class="quarto-xref">Figura&nbsp;<span>4.3</span></a>.</p>
<div id="cell-fig-ctermopares" class="cell" data-execution_count="7">
<div id="fig-ctermopares" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ctermopares-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_4.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ctermopares-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.3: Resultados de las mediciones de temperatura después de aplicar la regresión lineal.
</figcaption>
</figure>
</div>
</div>
<p>En la <a href="#tbl-error-taire" class="quarto-xref">Tabla&nbsp;<span>4.3</span></a> se observa que, antes de la calibración, los cuatro termopares presentaban EM positivos significativos, con valores que oscilaban entre 0.95°C y 2.11°C. Esto indica un sesgo sistemático consistente que tendía a sobrestimar la temperatura respecto a los valores de referencia. Tras aplicar la calibración, los EM se reducen drásticamente hasta valores cercanos a cero, entre -0.00°C y 0.00°C, lo que evidencia la eliminación del sesgo sistemático. Asimismo, el EAM disminuye considerablemente en todos los casos, pasando de un rango de 0.99°C a 2.11°C a un nuevo rango de 0.08°C a 0.10°C. Esta reducción refleja una mejora en la exactitud de las mediciones.</p>
<div id="tbl-error-taire" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-error-taire-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.3: EM y EAM de cada termopar antes y después de la calibración.
</figcaption>
<div aria-describedby="tbl-error-taire-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 22%">
<col style="width: 20%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th>Termopar</th>
<th>EM (antes) [°C]</th>
<th>EM (después) [°C]</th>
<th>EAM (antes) [°C]</th>
<th>EAM (después) [°C]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Termopar 1</td>
<td>1.00</td>
<td>−0.00</td>
<td>1.00</td>
<td>0.08</td>
</tr>
<tr class="even">
<td>Termopar 2</td>
<td>0.95</td>
<td>0.00</td>
<td>0.99</td>
<td>0.08</td>
</tr>
<tr class="odd">
<td>Termopar 3</td>
<td>1.77</td>
<td>−0.00</td>
<td>1.77</td>
<td>0.10</td>
</tr>
<tr class="even">
<td>Termopar 4</td>
<td>2.11</td>
<td>0.00</td>
<td>2.11</td>
<td>0.08</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="scd30" class="level4">
<h4 class="anchored" data-anchor-id="scd30">SCD30</h4>
<p>Para la campaña de referenciación del SCD30, el instrumento utilizado fue el Fluke 975 AirMeter (<a href="#fig-fluke" class="quarto-xref">Figura&nbsp;<span>4.4</span></a>), este es un instrumento portátil de diagnóstico de la calidad del aire interior. Este dispositivo mide simultáneamente temperatura, humedad relativa, dióxido de carbono (CO<sub>2</sub>) y monóxido de carbono (CO).</p>
<div id="fig-fluke" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-fluke-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href=".\images/fluke.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figura&nbsp;4.4: Fluke 975 AirMeter."><img src=".\images/fluke.png" class="img-fluid figure-img" style="width:15.0%"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fluke-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.4: Fluke 975 AirMeter.
</figcaption>
</figure>
</div>
<p>La campaña consistió en realizar mediciones simultáneas del Fluke 975 AirMeter y del SCD30 durante un período total de 7 horas y 45 minutos, registrando una muestra cada minuto. Para minimizar posibles interferencias, ambos dispositivos se ubicaron lo más próximos posible y se instalaron en una zona aislada del espacio interior donde se llevo a cabo la prueba, de modo que la presencia humana no afectara los resultados. Los datos obtenidos se muestran en la <a href="#fig-scd30-t" class="quarto-xref">Figura&nbsp;<span>4.5</span></a>.</p>
<div id="cell-fig-scd30-t" class="cell" data-execution_count="8">
<div id="fig-scd30-t" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scd30-t-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_5.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scd30-t-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.5: Comparación de las mediciones de temperatura del Fluke y el SCD30 durante su campaña de referenciación.
</figcaption>
</figure>
</div>
</div>
<p>Para esta campaña de referenciación, se compararon directamente los datos de medición obtenidos por el SCD30 y el Fluke 975 AirMeter, dado que el SCD30 se adquiere ya calibrado. Se realizó el cálculo de errores, en particular el EM y el EAM, para evaluar la discrepancia entre las mediciones de ambos instrumentos.</p>
<p>La <a href="#tbl-scd30-t" class="quarto-xref">Tabla&nbsp;<span>4.4</span></a> presenta los resultados de temperatura del aire obtenidos para cada instrumento:</p>
<div id="tbl-scd30-t" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-scd30-t-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.4: EM y EAM para la temperatura del SCD30 con respecto al Fluke.
</figcaption>
<div aria-describedby="tbl-scd30-t-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<thead>
<tr class="header">
<th>Variable</th>
<th>EM [°C]</th>
<th>EAM [°C]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Temperatura</td>
<td>0.89</td>
<td>0.89</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>La tabla presenta el EM y el EAM en la medición de temperatura del sensor SCD30 en comparación con el Fluke. Se observa que el SCD30 tiende a sobreestimar la temperatura en un promedio de 0.89°C. La similitud entre el EM y el EAM significa que las desviaciones no presentan grandes variaciones y se distribuyen de manera uniforme..</p>
<p>La correlación entre las mediciones de ambos instrumentos se visualiza en la <a href="#fig-cscd30-t" class="quarto-xref">Figura&nbsp;<span>4.6</span></a>, lo que respalda la evaluación de exactitud. Un coeficiente de correlación elevado indicaría que, a pesar de los errores sistemáticos, la tendencia de las mediciones del SCD30 sigue de cerca la del Fluke.</p>
<div id="cell-fig-cscd30-t" class="cell" data-execution_count="9">
<div id="fig-cscd30-t" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cscd30-t-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_6.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cscd30-t-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.6: Correlación de las mediciones de temperatura entre el Fluke y el SCD30.
</figcaption>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-trad-b" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="sec-trad-b"><span class="header-section-number">4.4</span> Temperatura radiante</h2>
<section id="tpf1" class="level4">
<h4 class="anchored" data-anchor-id="tpf1">TPF1</h4>
<p>Para la medición de la temperatura radiante se empleó el QUESTemp 36 (<a href="#fig-quest" class="quarto-xref">Figura&nbsp;<span>4.7</span></a>), un confortímetro diseñado para evaluar el estrés térmico en el ambiente, ya que permite medir la temperatura radiante, la temperatura del aire y la humedad relativa.</p>
<div id="fig-quest" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-quest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href=".\images/quest.jpeg" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Figura&nbsp;4.7: Quest Technologies QUESTemp 36."><img src=".\images/quest.jpeg" class="img-fluid figure-img" style="width:30.0%"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-quest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.7: Quest Technologies QUESTemp 36.
</figcaption>
</figure>
</div>
<p>El experimento consistió en ubicar el QUESTemp 36 dentro de una caja diseñada para limitar la incidencia directa de la radiación solar, lo que minimizó la influencia de la radiación externa y redujo el efecto de la convección forzada del viento, permitiendo así que la medición se centrara en la radiación térmica del entorno inmediato. Paralelamente, se colocó el sensor TPF1 en condiciones similares para garantizar que ambos dispositivos registraran la temperatura con la menor perturbación posible. Se tomaron datos cada minuto durante 23 horas. Los datos obtenidos se pueden observar en la <a href="#fig-radiante" class="quarto-xref">Figura&nbsp;<span>4.8</span></a>.</p>
<div id="cell-fig-radiante" class="cell" data-execution_count="10">
<div id="fig-radiante" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-radiante-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_7.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-radiante-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.8: Intervalo de medición del QUESTemp 36 y el TPF1 para su calibración.
</figcaption>
</figure>
</div>
</div>
<p>Para la calibración del TPF1/E-20, se aplicó un ajuste por regresión lineal utilizando la librería <code>scikit-learn</code> de Python, a partir de los datos de temperatura registrados simultáneamente por el QUESTemp 36 y el sensor TPF1/E-20. Empleando el mismo modelo lineal descrito en la <a href="#eq-lineal" class="quarto-xref">Ecuación&nbsp;<span>4.3</span></a>, se derivó la siguiente ecuación de calibración:</p>
<p><span id="eq-cal-radiante"><span class="math display">\[
T_{ref} = 1.0582 \cdot temp - 1.5553
\tag{4.5}\]</span></span></p>
<p>Al aplicar esta ecuación a los datos obtenidos durante la campaña, se calcularon los valores corregidos para el TPF1/E-20. Los ajustes lineales se pueden observar en la <a href="#fig-cradiante" class="quarto-xref">Figura&nbsp;<span>4.9</span></a>.</p>
<div id="cell-fig-cradiante" class="cell" data-execution_count="11">
<div id="fig-cradiante" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cradiante-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_8.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cradiante-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.9: Comparación de las mediciones del QUESTemp 36, el TPF1/E-20 y sus datos tras la calibración.
</figcaption>
</figure>
</div>
</div>
<p>En la <a href="#tbl-error-rad" class="quarto-xref">Tabla&nbsp;<span>4.5</span></a> se observa que, antes de calibrar, el sensor TPF1/E-20 presentaba un EM de -0.10°C, lo que indica un sesgo sistemático que tendía a subestimar la temperatura en comparación con el QUESTemp 36. Tras la aplicación de la ecuación de calibración, el EM se reduce a -0.00°C, un valor prácticamente nulo que evidencia la eliminación casi total del sesgo sistemático. Paralelamente, el EAM disminuye de 0.14°C a 0.11°C, lo que implica una mejora significativa en la exactitud de las mediciones. Estos resultados confirman que el proceso de calibración ha corregido adecuadamente el sesgo de los datos, permitiendo obtener mediciones de temperatura estrechamente alineadas con los valores de referencia del QUESTemp 36.</p>
<div id="tbl-error-rad" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-error-rad-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.5: EM y EAM del TPF1 antes y después de la calibración.
</figcaption>
<div aria-describedby="tbl-error-rad-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<thead>
<tr class="header">
<th>Fase</th>
<th>EM [°C]</th>
<th>EAM [°C]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Antes de calibrar</td>
<td>-0.10</td>
<td>0.14</td>
</tr>
<tr class="even">
<td>Después de calibrar</td>
<td>-0.00</td>
<td>0.11</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
</section>
<section id="sec-viento-b" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="sec-viento-b"><span class="header-section-number">4.5</span> Velocidad del viento</h2>
<section id="wind-sensor" class="level4">
<h4 class="anchored" data-anchor-id="wind-sensor">Wind Sensor</h4>
<p>El WindMaster de Gill Instruments (<a href="#fig-wind" class="quarto-xref">Figura&nbsp;<span>4.10</span></a>) es un anemómetro ultrasónico de alta precisión diseñado para medir la velocidad y dirección del viento en tres direcciones (u, v, w). En esta campaña se utilizó como instrumento de referencia para la calibración del Wind Sensor.</p>
<div id="fig-wind" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wind-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href=".\images/windmaster.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Figura&nbsp;4.10: Gill Instruments WindMaster."><img src=".\images/windmaster.jpg" class="img-fluid figure-img" style="width:35.0%"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wind-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.10: Gill Instruments WindMaster.
</figcaption>
</figure>
</div>
<p>La campaña de calibración tuvo una duración de 1 hora, durante la cual se capturaron datos a una frecuencia de 1 Hz. Aprovechando las dimensiones del WindSensor (2230 x 680 mm), se posicionó estratégicamente en la parte superior central del WindMaster, previa verificación de que su presencia no interfiriera con las mediciones del anemómetro. En un entorno abierto, el WindSensor registró datos de voltaje, los cuales se utilizaron junto con los datos de velocidad del viento obtenidos del WindMaster para desarrollar una ecuación de calibración que permitiera convertir el voltaje medido a m/s. Los resultados de la campaña se pueden visualizar en la <a href="#fig-viento" class="quarto-xref">Figura&nbsp;<span>4.11</span></a>.</p>
<div id="cell-fig-viento" class="cell" data-execution_count="12">
<div id="fig-viento" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-viento-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_9.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-viento-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.11: Comparación de la velocidad del viento registrada por el WindMaster y el voltaje del Wind Sensor durante la campaña de calibración.
</figcaption>
</figure>
</div>
</div>
<p>Cabe mencionar que el Wind Sensor emplea la técnica de anemometría por filamento caliente, en la que un pequeño elemento resistivo se mantiene a una temperatura superior a la del aire circundante. La velocidad del viento se determina a partir de la cantidad de voltaje necesaria para compensar la pérdida de calor del filamento.</p>
<p>Por lo tanto se llevó a cabo otra campaña donde se detectó un desfase sistemático de 1.1621 V en condiciones de viento nulo (0 m/s). Este valor base se genera por varios factores inherentes al sistema de medida, por ejemplo:</p>
<ul>
<li><p>Calentamiento de mantenimiento del filamento: Aún sin flujo de aire, el filamento caliente requiere un voltaje mínimo para mantener su temperatura de operación.</p></li>
<li><p>Variaciones en la temperatura ambiente: Los cambios de la temperatura del aire modifican la resistencia del filamento y de otros componentes, desplazando el punto cero del sensor.</p></li>
</ul>
<p>Para aislar la respuesta al viento y eliminar dichas contribuciones, se restaron 1.1621 V de cada lectura de voltaje antes de ajustar el modelo de calibración. De este modo, la señal procesada refleja únicamente la influencia de la velocidad del viento sobre el filamento caliente.</p>
<p>Durante la calibración del Wind Sensor se siguió la metodología proporcionada por el fabricante <span class="citation" data-cites="windsensor">Modern Device (<a href="referencias.html#ref-windsensor" role="doc-biblioref">2017</a>)</span> en su blog oficial. Según esta fuente, la relación entre la velocidad del viento (WS), el voltaje corregido y la temperatura sigue una ley de potencia descrita por la siguiente ecuación:</p>
<p><span id="eq-potencia"><span class="math display">\[
WS = a \times (\text{Voltaje})^b \times (\text{Temperatura})^c
\tag{4.6}\]</span></span></p>
<p>Para facilitar el ajuste mediante técnicas de regresión, se aplicó una transformación logarítmica a ambos lados de la ecuación, lo que permitió convertir el modelo en una forma lineal:</p>
<p><span id="eq-potencia-ln"><span class="math display">\[
\ln(WS) = \ln(a) + b \times \ln(\text{Voltaje}) + c \times \ln(\text{Temperatura})
\tag{4.7}\]</span></span></p>
<p>Esta transformación permitió emplear técnicas de regresión lineal para estimar los parámetros <span class="math inline">\(ln(a)\)</span>, <span class="math inline">\(b\)</span> y <span class="math inline">\(c\)</span> a partir de los datos experimentales. Una vez obtenidos, se recuperó el parámetro <span class="math inline">\(a\)</span> mediante la función exponencial <span class="math inline">\((a = exp(ln(a)))\)</span> y se formuló la ecuación de calibración en su forma original. En este dominio lineal, se utilizó la librería <code>scikit-learn</code> de Python para estimar los parámetros del modelo.</p>
<p>Se probaron tres opciones de remuestreo, 3, 5 y 10 segundos, y se calculó para cada una el coeficiente de correlación (<span class="math inline">\(r\)</span>) entre el voltaje corregido del Wind Sensor y la velocidad del viento del WindMaster. En la <a href="#tbl-corr-viento" class="quarto-xref">Tabla&nbsp;<span>4.6</span></a> se muestran los coeficientes de correlación para los diferentes remuestreos.</p>
<div id="tbl-corr-viento" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-corr-viento-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.6: Coeficientes de correlación para los distinto remuestreos.
</figcaption>
<div aria-describedby="tbl-corr-viento-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<thead>
<tr class="header">
<th>Remuestreo</th>
<th>Coeficiente de correlación</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>3 segundos</td>
<td>0.7622</td>
</tr>
<tr class="even">
<td>5 segundos</td>
<td>0.8079</td>
</tr>
<tr class="odd">
<td>10 segundos</td>
<td>0.8637</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Los coeficientes de correlación más cercanos a 1 indican una mayor concordancia entre las lecturas del Wind Sensor y las del WindMaster, por lo que se optó por el remuestreo a 10 segundos. Este intervalo más amplio reduce las fluctuaciones repentinas (el “ruido”) en el voltaje del sensor, sin comprometer la capacidad de capturar las variaciones reales de velocidad de viento necesarias para la calibración. En consecuencia, la relación señal-ruido mejora, es decir, aumenta la proporción de información útil frente a las perturbaciones indeseadas. Con estos datos remuestreados a 10 segundos se aplicó la regresión lineal en el dominio logarítmico, obteniéndose la siguiente ecuación de calibración:</p>
<p><span id="eq-cal-viento"><span class="math display">\[
WS = 26.3431 \times (\text{Voltaje})^{1.4273} \times (\text{Temperatura})^{-0.7631}
\tag{4.8}\]</span></span></p>
<p>Esta ecuación se empleó para convertir las mediciones de voltaje (tras aplicar la corrección) y de temperatura en valores precisos de velocidad del viento (m/s) con respecto al WindMaster y pueden observarse en la <a href="#fig-cviento" class="quarto-xref">Figura&nbsp;<span>4.12</span></a>.</p>
<div id="cell-fig-cviento" class="cell" data-execution_count="13">
<div id="fig-cviento" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cviento-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_10.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cviento-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.12: Comparación de las mediciones de velocidad del viento registradas por el WindMaster y el Wind Sensor tras su calibración.
</figcaption>
</figure>
</div>
</div>
<p>En la tabla <a href="#tbl-error-wind" class="quarto-xref">Tabla&nbsp;<span>4.7</span></a> se observa que, antes de calibrar, el Wind Sensor Rev.&nbsp;P6 presentaba un EM de -0.01 m/s, indicando un sesgo sistemático que subestimaba la velocidad del viento frente al WindMaster. Tras aplicar la ecuación de calibración, el error se reduce a -0.00 m/s, eliminando prácticamente el sesgo. Además, el EAM baja de 0.06 m/s a 0.05 m/s, mejorando la exactitud de las mediciones. Estos resultados demuestran que la calibración ha corregido tanto el sesgo de los datos, asegurando mediciones con mayor exactitud respecto al WindMaster.</p>
<div id="tbl-error-wind" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-error-wind-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.7: EM y EAM del Wind Sensor antes y después de la calibración.
</figcaption>
<div aria-describedby="tbl-error-wind-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<thead>
<tr class="header">
<th>Fase</th>
<th>EM [m/s]</th>
<th>EAM [m/s]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Antes de calibrar</td>
<td>-0.01</td>
<td>0.06</td>
</tr>
<tr class="even">
<td>Después de calibrar</td>
<td>-0.00</td>
<td>0.05</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
</section>
<section id="sec-hrco-b" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="sec-hrco-b"><span class="header-section-number">4.6</span> Humedad relativa y CO<sub>2</sub></h2>
<section id="scd30-1" class="level4">
<h4 class="anchored" data-anchor-id="scd30-1">SCD30</h4>
<p>Al igual que en el caso de la temperatura del aire, el SCD30 se utilizó para obtener mediciones de humedad relativa y concentraciones de CO<sub>2</sub>, empleándose nuevamente el Fluke 975 AirMeter (<a href="#fig-fluke" class="quarto-xref">Figura&nbsp;<span>4.4</span></a>) como instrumento de referencia. La recolección de datos se realizó durante la misma campaña, por lo que las condiciones ambientales y los procedimientos fueron idénticos a las descritas en la <a href="#sec-taire-b" class="quarto-xref"><span>Sección 4.3</span></a>. Los resultados obtenidos se muestran en la <a href="#fig-scd30" class="quarto-xref">Figura&nbsp;<span>4.13</span></a>.</p>
<div id="cell-fig-scd30" class="cell" data-execution_count="14">
<div id="fig-scd30" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scd30-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="545px" src="iframe_figures/figure_11.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scd30-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.13: Comparación de las mediciones de humedad relativa y CO<sub>2</sub> del Fluke y el SCD30 durante su campaña de referenciación.
</figcaption>
</figure>
</div>
</div>
<p>Se obtuvieron el EM y el EAM para evaluar la discrepancia entre las mediciones del SCD30 y el Fluke. La tabla <a href="#tbl-error-scd30" class="quarto-xref">Tabla&nbsp;<span>4.8</span></a> muestra que, en el caso de la humedad relativa, el SCD30 subestima en promedio 2.17 puntos porcentuales respecto al Fluke. En contraste, para la concentración de CO<sub>2</sub> se observa una sobreestimación promedio de 9.65 ppm. Además, el hecho de que el EAM para el CO<sub>2</sub> sea mayor que el EM indica una mayor dispersión en las mediciones de este parámetro.</p>
<div id="tbl-error-scd30" class="hover sm quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-error-scd30-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;4.8: EM y EAM para la humedad relativa y el CO<sub>2</sub> del SCD30 con respecto al Fluke.
</figcaption>
<div aria-describedby="tbl-error-scd30-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-sm small caption-top table">
<thead>
<tr class="header">
<th>Variable</th>
<th>EM</th>
<th>EAM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Humedad relativa</td>
<td>–2.17 %</td>
<td>2.17 %</td>
</tr>
<tr class="even">
<td>CO<sub>2</sub></td>
<td>9.65 ppm</td>
<td>13.16 ppm</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>La correlación entre las mediciones de ambos instrumentos se visualiza en la <a href="#fig-cscd30" class="quarto-xref">Figura&nbsp;<span>4.14</span></a>.</p>
<div id="cell-fig-cscd30" class="cell" data-execution_count="15">
<div id="fig-cscd30" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cscd30-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<iframe scrolling="no" width="100%" height="820" src="iframe_figures/figure_12.html" frameborder="0" allowfullscreen=""></iframe>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cscd30-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.14: Correlación de las mediciones de humedad relativa y CO<sub>2</sub> entre el Fluke y el SCD30.
</figcaption>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-sonido-b" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="sec-sonido-b"><span class="header-section-number">4.7</span> Sonido</h2>
<section id="micrófono" class="level4">
<h4 class="anchored" data-anchor-id="micrófono">Micrófono</h4>
<p>Pendiente a la documentación de Jorge.</p>
<div id="fig-tes" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href=".\images/tes.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Figura&nbsp;4.15: TES-1356 Sound Level Calibrator."><img src=".\images/tes.jpg" class="img-fluid figure-img" style="width:30.0%"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.15: TES-1356 Sound Level Calibrator.
</figcaption>
</figure>
</div>
</section>
</section>
<section id="sec-ilum-b" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="sec-ilum-b"><span class="header-section-number">4.8</span> Iluminancia</h2>
<section id="fisheye" class="level4">
<h4 class="anchored" data-anchor-id="fisheye">Fisheye</h4>
<p>En el caso de la iluminancia, no se realizó ningún proceso de calibración o referenciación. Se empleó la cámara Arducam 5MP OV5647 Ultra Wide Angle en conjunto con el software <code>Radiance</code>. Se desarrolló un script, descrito en la sección <a href="capitulo_3.html#sec-diseno" class="quarto-xref"><span>Sección 3.1</span></a>, que calcula la iluminancia total mediante la integración del mapa de luminancia (<a href="#fig-ilum" class="quarto-xref">Figura&nbsp;<span>4.16</span></a>) generado a partir de las imágenes capturadas. El proceso inicia con la creación de una imagen HDR a partir de la fusión de fotografías tomadas a diferentes exposiciones, lo que permite capturar la mayor cantidad de información posible sobre la intensidad luminosa. Posteriormente, a esta imagen HDR se le aplica una escala de <em>false color</em> para identificar los valores de iluminancia en cada punto de la imagen. El cálculo de la integral para el mapa generado facilita la determinación de la iluminancia total del espacio interior en el momento de la captura. Además, el mismo script se encarga de enviar el valor de la iluminancia total a <code>ThingsBoard</code>, conforme se detalla en la sección <a href="#sec-obtencion" class="quarto-xref"><span>Sección 4.2</span></a>.</p>
<div id="fig-ilum" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ilum-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href=".\images/ilum.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Figura&nbsp;4.16: Mapa de luminancia generado con una cámara 5MP OV5647 y el software Radiance."><img src=".\images/ilum.jpg" class="img-fluid figure-img" style="width:70.0%"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ilum-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.16: Mapa de luminancia generado con una cámara 5MP OV5647 y el software Radiance.
</figcaption>
</figure>
</div>
<p>En este contexto, los mapas de luminancia generados son de carácter cualitativo, pues su principal objetivo es representar visualmente la distribución espacial de la intensidad luminosa, más que proporcionar valores puntuales de alta precisión. Estos mapas permiten identificar zonas de alta o baja iluminancia y comprender la uniformidad de la luz en el espacio, aunque la cuantificación detallada se basa en el cálculo de la integral de la imagen HDR.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-windsensor" class="csl-entry" role="listitem">
Modern Device. 2017. <span>«Calibrating The Rev. P Wind Sensor From A New Regression»</span>. <a href="https://moderndevice.com/blogs/documentation/calibrating-the-rev-p-wind-sensor-from-a-new-regression">https://moderndevice.com/blogs/documentation/calibrating-the-rev-p-wind-sensor-from-a-new-regression</a>.
</div>
<div id="ref-thingsboard" class="csl-entry" role="listitem">
ThingsBoard. 2023. <span>«ThingsBoard: Open-source IoT platform for data collection, processing, visualization, and device management»</span>. <a href="https://thingsboard.io/">https://thingsboard.io/</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./capitulo_3.html" class="pagination-link" aria-label="Diseño y construcción del DTHIS-C">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Diseño y construcción del DTHIS-C</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./capitulo_5.html" class="pagination-link" aria-label="Conclusiones">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusiones</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>